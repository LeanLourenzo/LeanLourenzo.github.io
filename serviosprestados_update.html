<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Jquery 3.6 -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>

    <!-- Bootstrap Table JS e CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css"
    />
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>

    <!-- Font Awesome para usar icones -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <script src="javascript/index.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/index.css" />

    <title>Logomarca Cabeleleiros</title>
  </head>

  <body>
    <div class="d-flex" id="wrapper">
      <!-- Sidebar-->
      <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="list-group list-group-flush py-4 align-content-center">
          <div class="container my-4">
            <h1 class="textLogo">Logomarca</h1>
          </div>
          <div class="text-center pb-5 pt-2 my-2">
            <img src="img/llogo.jpg" class="w-50 rounded-circle" alt="..." />
          </div>

          <div class="accordion accordion-flush" id="accordionFlushExample">
            <div class="accordion-item">
              <h2 class="accordion-header" id="flush-headingOne">
                <button
                  class="accordion-button collapsed border-0"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#flush-collapseOne"
                  aria-expanded="false"
                  aria-controls="flush-collapseOne"
                >
                  Clientes
                </button>
              </h2>
              <div
                id="flush-collapseOne"
                class="accordion-collapse collapse"
                aria-labelledby="flush-headingOne"
                data-bs-parent="#accordionFlushExample"
              >
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="clientes.html"
                    >Clientes</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="clientes_inserir.html"
                    >Inserir cliente</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="cliente_update.html"
                    >Update cliente</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="cliente_deletar.html"
                    >Deletar cliente</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="accordion accordion-flush" id="accordionFlushExample2">
            <div class="accordion-item">
              <h2 class="accordion-header" id="flush-headingTwo">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#flush-collapseTwo"
                  aria-expanded="false"
                  aria-controls="flush-collapseTwo"
                >
                  Atendentes
                </button>
              </h2>
              <div
                id="flush-collapseTwo"
                class="accordion-collapse collapse"
                aria-labelledby="flush-headingTwo"
                data-bs-parent="#accordionFlushExample2"
              >
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="atendentes.html"
                    >Atendente</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="atendente_inserir.html"
                    >Inserir atendente</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="atendente_update.html"
                    >Update atendente</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="atendente_deletar.html"
                    >Deletar atendente</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="accordion accordion-flush" id="accordionFlushExample3">
            <div class="accordion-item">
              <h2 class="accordion-header" id="flush-heading3">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#flush-collapse3"
                  aria-expanded="false"
                  aria-controls="flush-collapse3"
                >
                  Unidades
                </button>
              </h2>
              <div
                id="flush-collapse3"
                class="accordion-collapse collapse"
                aria-labelledby="flush-heading3"
                data-bs-parent="#accordionFlushExample3"
              >
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="unidades.html"
                    >Unidades</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="unidade_inserir.html"
                    >Inserir unidades</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="unidade_update.html"
                    >Update unidade</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="unidade_deletar.html"
                    >Deletar unidades</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="accordion accordion-flush" id="accordionFlushExample4">
            <div class="accordion-item">
              <h2 class="accordion-header" id="flush-heading4">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#flush-collapse4"
                  aria-expanded="false"
                  aria-controls="flush-collapse4"
                >
                  Sessões
                </button>
              </h2>
              <div
                id="flush-collapse4"
                class="accordion-collapse collapse"
                aria-labelledby="flush-heading4"
                data-bs-parent="#accordionFlushExample4"
              >
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="sessoes.html"
                    >Sessões</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="sessoes_inserir.html"
                    >Inserir sessões</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="sessao_update.html"
                    >Update sessões</a
                  >
                </div>
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="sessoes_deletar.html"
                    >Deletar sessões</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="accordion accordion-flush" id="accordionFlushExample5">
            <div class="accordion-item">
              <h2 class="accordion-header" id="flush-heading5">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#flush-collapse5"
                  aria-expanded="false"
                  aria-controls="flush-collapse5"
                >
                  Serviços Prestados
                </button>
              </h2>
              <div
                id="flush-collapse5"
                class="accordion-collapse collapse"
                aria-labelledby="flush-heading5"
                data-bs-parent="#accordionFlushExample5"
              >
                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="serviosprestados.html"
                    >Serviços Prestados</a
                  >
                </div>

                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="serviosprestados_inserir.html"
                    >Inserir serviços</a
                  >
                </div>

                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="serviosprestados_update.html"
                    >Update serviços</a
                  >
                </div>

                <div class="accordion-body">
                  <a
                    class="
                      list-group-item
                      list-group-item-action
                      list-group-item-light
                      border-0
                      rounded
                      p-2
                      m-0
                    "
                    href="serviosprestados_deletar.html"
                    >Deletar serviços</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="page-content-wrapper">
        <!-- Barra de navegação-->
        <nav
          class="navbar navbar-expand-lg navbar-light bg-light border-bottom"
        >
          <div class="container-fluid d-flex">
            <i class="fas fa-bars fa-2x" id="sidebarToggle"></i>
            <h1 class="textLogo px-3 pt-1" style="font-size: 1.5rem">
              Logomarca
            </h1>
          </div>
        </nav>

        <p class="text-center fw-bold fs-3 pt-3 pb-2">
          Alterar dados dos serviços prestados
        </p>
        <p id="queryText" class="text-center fw-light fs-5"></p>

        <div class="container w-100 pt-4">
          <!-- ServicoID -->
          <label for="inputPassword5" class="form-label">Servico ID</label>
          <input
            type="text"
            id="inputServicoID"
            class="form-control"
            aria-describedby="passwordHelpBlock"
          />
          <div id="passwordHelpBlock" class="form-text">
            ID deve ser único, não pode ser repetido.
          </div>

          <div class="py-3 d-flex justify-content-center">
            <button
              type="button"
              class="btn btn-outline-primary"
              onclick="Pesquisar()"
            >
              Pesquisar Pessoa
            </button>
          </div>

          <div id="tableTabela" class="container w-100">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th data-field="ServicoID">ID do serviço prestado</th>
                  <th data-field="SessaoID">ID da sessão</th>
                  <th data-field="UnidadeID">ID da unidade</th>
                  <th data-field="AtendenteID">ID do Atendente</th>
                  <th data-field="NumeroDoItem">
                    Quantidade de serviços<br />
                    por sessão
                  </th>
                </tr>
              </thead>
            </table>
          </div>
          <br />
          <br />
          <!-- SessaoID -->
          <label for="inputPassword5" class="form-label">ID da Sessão</label>
          <input
            type="text"
            id="inputID"
            class="form-control"
            aria-describedby="passwordHelpBlock"
          />
          <div id="passwordHelpBlock" class="form-text">
            ID deve ser único, não pode ser repetido.
          </div>

          <!-- inputUnidadeID -->
          <label for="inputPassword5" class="form-label">ID da unidade</label>
          <input
            type="text"
            id="inputUnidadeID"
            class="form-control"
            aria-describedby="passwordHelpBlock"
          />
          <div id="passwordHelpBlock" class="form-text">
            Sobrenome deve conter entre 8-20 characteres, sem espaços, números
            caracteres especiais ou emojis
          </div>

          <!-- inputAtendenteID -->
          <label for="inputPassword5" class="form-label">ID do atendente</label>
          <input
            type="text"
            id="inputAtendenteID"
            class="form-control"
            aria-describedby="passwordHelpBlock"
          />
          <div id="passwordHelpBlock" class="form-text">
            Sobrenome deve conter entre 8-20 characteres, sem espaços, números
            caracteres especiais ou emojis
          </div>
          <!-- inputNumeroDoItem -->
          <label for="inputPassword5" class="form-label">Número do item</label>
          <input
            type="text"
            id="inputNumeroDoItem"
            class="form-control"
            aria-describedby="passwordHelpBlock"
          />
          <div id="passwordHelpBlock" class="form-text">
            Nome deve conter entre 8-20 characteres, sem espaços, números
            caracteres especiais ou emojis.
          </div>
          <div class="py-3 d-flex justify-content-center">
            <button
              type="button"
              class="btn btn-outline-primary"
              onclick="Enviar()"
            >
              Enviar
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
    // Função para captar o ID nos campos do browser, e requistar a pesquisa no banco de dados MySQL
    function Pesquisar() {
      let ServicoID = document.getElementById("inputServicoID").value;
      $("#tableTabela").load(" #tableTabela > *"); // Realiza um refresh apenas na div tableTabela
      get(ServicoID);
    }

    // Função para captar os dados dos campos do browser e envia-los para API
    function Enviar() {
      let ServicoID = document.getElementById("inputServicoID").value;
      let SessaoID = document.getElementById("inputID").value;
      let NumeroDoItem = document.getElementById("inputNumeroDoItem").value;
      let UnidadeID = document.getElementById("inputUnidadeID").value;
      let AtendenteID = document.getElementById("inputAtendenteID").value;

      let query = criaQueryUpdateServicosPrestados(
        SessaoID,
        UnidadeID,
        AtendenteID,
        NumeroDoItem,
        ServicoID
      );

      // Trecho que renderiza no browser a query SQL pronta, retornada na funçaõ acima.
      query = JSON.parse(query);
      document.getElementById("queryText").innerHTML =
        "SQL Query: " + query.qualQuery;
      alert("Modificações concluidas");
    }

    // Função para esconder e expandir o menu lateral
    window.addEventListener("DOMContentLoaded", (event) => {
      const sidebarToggle = document.body.querySelector("#sidebarToggle");
      if (sidebarToggle) {
        sidebarToggle.addEventListener("click", (event) => {
          event.preventDefault();
          document.body.classList.toggle("sb-sidenav-toggled");
          localStorage.setItem(
            "sb|sidebar-toggle",
            document.body.classList.contains("sb-sidenav-toggled")
          );
        });
      }
    });
  </script>

  <!--Bootstrap JS-->
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
    integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
    crossorigin="anonymous"
  ></script>
</html>
